{"ast":null,"code":"import { TicketService } from \"src/app/ticket/services/ticket.service\";\nimport { Ticket } from \"../services/ticket\";\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Comments } from \"../services/comments\";\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/ticket/services/ticket.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../frontend/frontend-header/frontend-header.component\";\nimport * as i6 from \"../../frontend/frontend-footer/frontend-footer.component\";\n\nfunction TicketDetailsComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Enter Your Comment\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 19)(5, \"div\", 20)(6, \"input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function TicketDetailsComponent_div_49_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.commentFrm.comments_title = $event);\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 19)(8, \"div\", 20)(9, \"textarea\", 22);\n    i0.ɵɵlistener(\"ngModelChange\", function TicketDetailsComponent_div_49_Template_textarea_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.commentFrm.comments_description = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(10, \"div\", 20)(11, \"button\", 23);\n    i0.ɵɵtext(12, \"Submit Comment\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.commentFrm.comments_title)(\"value\", ctx_r0.commentFrm.comments_title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.commentFrm.comments_description)(\"value\", ctx_r0.commentFrm.comments_description);\n  }\n}\n\nfunction TicketDetailsComponent_div_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"a\", 25);\n    i0.ɵɵtext(2, \"Login to post comment\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction TicketDetailsComponent_div_51_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"div\", 29)(2, \"div\", 30)(3, \"div\", 31);\n    i0.ɵɵelement(4, \"img\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 33)(6, \"h3\", 34);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 35)(9, \"div\", 36)(10, \"h5\", 37);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"p\", 38);\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const comment_r7 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"http://127.0.0.1:8080/uploads/\", ctx_r6.ticket.ticket_image_filename, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(comment_r7.comments_title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\"Posted By : \", comment_r7.customer_name, \" On Date (\", i0.ɵɵpipeBind2(12, 5, comment_r7.comments_date, \"dd MMMM,yyyy\"), \")\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", comment_r7.comments_description, \" \");\n  }\n}\n\nfunction TicketDetailsComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"h4\");\n    i0.ɵɵtext(2, \"All Comments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, TicketDetailsComponent_div_51_div_3_Template, 15, 8, \"div\", 27);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 1, ctx_r2.comments));\n  }\n}\n\nexport let TicketDetailsComponent = /*#__PURE__*/(() => {\n  class TicketDetailsComponent {\n    constructor(ticketService, route, router, datePipe) {\n      this.ticketService = ticketService;\n      this.route = route;\n      this.router = router;\n      this.datePipe = datePipe;\n      this.id = \"\";\n      this.order_id = 0;\n      this.user_level_id = window.sessionStorage.user_level_id;\n      this.user_id = window.sessionStorage.user_id;\n      this.ticket = new Ticket();\n      this.commentFrm = new Comments();\n      this.formData = new FormData();\n      this.comment_date = new Date();\n    }\n\n    ngOnInit() {\n      this.id = this.route.snapshot.paramMap.get('id');\n\n      if (this.id) {\n        this.getTicket(this.id);\n      }\n\n      this.getAllComments(this.id);\n    }\n\n    onSubmit() {\n      this.commentFrm.comments_ticket_id = this.id;\n      this.commentFrm.comments_user_id = window.sessionStorage.user_id;\n      this.commentFrm.comments_date = this.datePipe.transform(this.comment_date, 'yyyy-MM-dd');\n      this.save();\n    }\n\n    save() {\n      this.ticketService.saveComment(this.commentFrm).subscribe(data => {\n        console.log(data);\n        this.getAllComments(this.id);\n        this.commentFrm.comments_title = \"\";\n        this.commentFrm.comments_description = \"\";\n        this.router.navigate(['/ticket-details/' + this.id]);\n      }, err => {// this.errorMessage = err.error.message;\n        // this.isSignUpFailed = true;\n      });\n    }\n\n    getTicket(id) {\n      this.ticketService.getTicketDetails(id).subscribe(data => {\n        console.log(\"Inside Ticket : \");\n        console.log(data);\n        this.ticket = data[0];\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    getAllComments(id) {\n      this.comments = this.ticketService.getAllComments(id);\n      console.log(this.comments);\n    }\n\n  }\n\n  TicketDetailsComponent.ɵfac = function TicketDetailsComponent_Factory(t) {\n    return new (t || TicketDetailsComponent)(i0.ɵɵdirectiveInject(i1.TicketService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.DatePipe));\n  };\n\n  TicketDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TicketDetailsComponent,\n    selectors: [[\"app-ticket-details\"]],\n    features: [i0.ɵɵProvidersFeature([DatePipe])],\n    decls: 53,\n    vars: 11,\n    consts: [[1, \"myh\"], [1, \"container\"], [1, \"row\"], [1, \"col-xl-12\"], [1, \"text-ticket\"], [2, \"font-size\", \"21px\"], [1, \"ticket_area\", \"single-post-area\", 2, \"padding\", \"20px 0px\"], [1, \"container-fliud\"], [1, \"wrapper\", \"row\"], [1, \"details\"], [1, \"table\", \"table-striped\", \"table-bordered\"], [1, \"thead-dark\"], [1, \"col\"], [\"colspan\", \"4\"], [1, \"col-lg-12\", \"posts-list\"], [\"ngNativeValidate\", \"\", \"action\", \"#\", \"id\", \"commentForm\", 1, \"form-contact\", \"comment_form\", 2, \"padding-top\", \"-10px !important\", 3, \"ngSubmit\"], [4, \"ngIf\"], [\"class\", \"comment-form\", 4, \"ngIf\"], [\"class\", \"comments-area\", 4, \"ngIf\"], [1, \"col-12\"], [1, \"form-group\"], [\"name\", \"comments_title\", \"id\", \"comments_title\", \"type\", \"text\", \"placeholder\", \"Enter Title\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"value\", \"ngModelChange\"], [\"name\", \"comments_description\", \"id\", \"comments_description\", \"cols\", \"30\", \"rows\", \"9\", \"placeholder\", \"Write your comment\", \"required\", \"\", 1, \"form-control\", \"w-100\", 3, \"ngModel\", \"value\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"button\", \"button-contactForm\", \"btn_1\", \"boxed-btn\"], [1, \"comment-form\"], [\"href\", \"/login\", 1, \"boxed-btn3\", 2, \"color\", \"#FFF !important\"], [1, \"comments-area\"], [\"class\", \"comment-list\", 4, \"ngFor\", \"ngForOf\"], [1, \"comment-list\"], [1, \"single-comment\", \"justify-content-between\", \"d-flex\"], [1, \"user\", \"justify-content-between\", \"d-flex\"], [1, \"thumb\"], [\"alt\", \"\", 3, \"src\"], [1, \"desc\"], [2, \"clear\", \"both\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"d-flex\", \"align-items-ticket\"], [2, \"font-size\", \"13px\", \"text-decoration\", \"underline\"], [1, \"comment\"]],\n    template: function TicketDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-frontend-header\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"h3\", 5);\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(8, \"section\", 6)(9, \"div\", 1)(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9)(13, \"table\", 10)(14, \"thead\", 11)(15, \"tr\")(16, \"th\", 12);\n        i0.ɵɵtext(17, \"Raised By\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"td\");\n        i0.ɵɵtext(19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\", 12);\n        i0.ɵɵtext(21, \"Email ID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"td\");\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"tbody\")(25, \"tr\")(26, \"th\", 12);\n        i0.ɵɵtext(27, \"Ticket Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"td\");\n        i0.ɵɵtext(29);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\", 12);\n        i0.ɵɵtext(31, \"Ticket Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"td\");\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(34, \"tr\")(35, \"th\", 12);\n        i0.ɵɵtext(36, \"Ticket Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"td\");\n        i0.ɵɵtext(38);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"th\", 12);\n        i0.ɵɵtext(40, \"User Contact\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"td\");\n        i0.ɵɵtext(42);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(43, \"tr\")(44, \"td\", 13);\n        i0.ɵɵtext(45);\n        i0.ɵɵelementEnd()()()()()()();\n        i0.ɵɵelementStart(46, \"div\", 2)(47, \"div\", 14)(48, \"form\", 15);\n        i0.ɵɵlistener(\"ngSubmit\", function TicketDetailsComponent_Template_form_ngSubmit_48_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtemplate(49, TicketDetailsComponent_div_49_Template, 13, 4, \"div\", 16);\n        i0.ɵɵtemplate(50, TicketDetailsComponent_div_50_Template, 3, 0, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(51, TicketDetailsComponent_div_51_Template, 5, 3, \"div\", 18);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(52, \"app-frontend-footer\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate1(\"Details of Ticket ID : \", ctx.ticket.ticket_id, \"\");\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate(ctx.ticket.customer_name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.ticket.customer_email);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.ticket.ticket_title);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.ticket.category_title);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.ticket.status_title);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.ticket.customer_mobile);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.ticket.ticket_description);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.user_level_id);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.user_level_id);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.comments);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.NgModel, i4.NgForm, i5.FrontendHeaderComponent, i6.FrontendFooterComponent, i3.AsyncPipe, i3.DatePipe],\n    styles: [\".col[_ngcontent-%COMP%]{background-color:#14484d;color:#fff!important;text-align:center}\"]\n  });\n  return TicketDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}